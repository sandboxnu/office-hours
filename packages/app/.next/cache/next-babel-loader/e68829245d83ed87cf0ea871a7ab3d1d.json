{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport { API } from \"@koh/api-client\";\nimport { AlertType } from \"@koh/common\";\nimport React from \"react\";\nimport useSWR from \"swr\";\nimport { useRouter } from \"next/router\";\nimport StudentQuestionRephraseModal from \"../Queue/Student/StudentQuestionRephraseModal\";\nexport default function AlertsContainer(_ref) {\n  var courseId = _ref.courseId;\n  var router = useRouter();\n\n  var _useSWR = useSWR(\"/api/v1/alerts\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", API.alerts.get(courseId));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      data = _useSWR.data,\n      mutateAlerts = _useSWR.mutate;\n\n  var alerts = data === null || data === void 0 ? void 0 : data.alerts;\n\n  var handleClose = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(alertId, courseId, queueId) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return API.alerts.close(alertId);\n\n            case 2:\n              mutateAlerts();\n              router.push(\"/course/\".concat(courseId, \"/queue/\").concat(queueId, \"?edit_question=true\"));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClose(_x, _x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var alertDivs = alerts === null || alerts === void 0 ? void 0 : alerts.map(function (alert) {\n    switch (alert.alertType) {\n      case AlertType.REPHRASE_QUESTION:\n        return __jsx(StudentQuestionRephraseModal, {\n          payload: alert.payload,\n          handleClose: /*#__PURE__*/function () {\n            var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(courseId, queueId) {\n              return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return handleClose(alert.id, courseId, queueId);\n\n                    case 2:\n                      return _context3.abrupt(\"return\", _context3.sent);\n\n                    case 3:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, _callee3);\n            }));\n\n            return function (_x4, _x5) {\n              return _ref4.apply(this, arguments);\n            };\n          }()\n        });\n    }\n  }); // probably want some better way of handling multiple alerts\n\n  return __jsx(\"div\", null, alertDivs);\n}","map":{"version":3,"sources":["/home/runner/work/office-hours/office-hours/packages/app/components/Nav/AlertsContainer.tsx"],"names":["API","AlertType","React","useSWR","useRouter","StudentQuestionRephraseModal","AlertsContainer","courseId","router","alerts","get","data","mutateAlerts","mutate","handleClose","alertId","queueId","close","push","alertDivs","map","alert","alertType","REPHRASE_QUESTION","payload","id"],"mappings":";;;AAAA,SAASA,GAAT,QAAoB,iBAApB;AACA,SAASC,SAAT,QAAmD,aAAnD;AACA,OAAOC,KAAP,MAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,4BAAP,MAAyC,+CAAzC;AAKA,eAAe,SAASC,eAAT,OAEwB;AAAA,MADrCC,QACqC,QADrCA,QACqC;AACrC,MAAMC,MAAM,GAAGJ,SAAS,EAAxB;;AADqC,gBAEED,MAAM,CAAC,gBAAD,wEAAmB;AAAA;AAAA;AAAA;AAAA;AAAA,6CAC9DH,GAAG,CAACS,MAAJ,CAAWC,GAAX,CAAeH,QAAf,CAD8D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB,GAFR;AAAA,MAE7BI,IAF6B,WAE7BA,IAF6B;AAAA,MAEfC,YAFe,WAEvBC,MAFuB;;AAKrC,MAAMJ,MAAM,GAAGE,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEF,MAArB;;AAEA,MAAMK,WAAW;AAAA,yEAAG,kBAAOC,OAAP,EAAgBR,QAAhB,EAA0BS,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZhB,GAAG,CAACS,MAAJ,CAAWQ,KAAX,CAAiBF,OAAjB,CADY;;AAAA;AAElBH,cAAAA,YAAY;AACZJ,cAAAA,MAAM,CAACU,IAAP,mBAAuBX,QAAvB,oBAAyCS,OAAzC;;AAHkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXF,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAMA,MAAMK,SAAS,GAAGV,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAEW,GAAR,CAAY,UAACC,KAAD,EAAW;AACvC,YAAQA,KAAK,CAACC,SAAd;AACE,WAAKrB,SAAS,CAACsB,iBAAf;AACE,eACE,MAAC,4BAAD;AACE,UAAA,OAAO,EAAEF,KAAK,CAACG,OADjB;AAEE,UAAA,WAAW;AAAA,iFAAE,kBAAOjB,QAAP,EAAiBS,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACLF,WAAW,CAACO,KAAK,CAACI,EAAP,EAAWlB,QAAX,EAAqBS,OAArB,CADN;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAF;;AAAA;AAAA;AAAA;AAAA;AAFb,UADF;AAFJ;AAWD,GAZiB,CAAlB,CAbqC,CA2BrC;;AACA,SAAO,mBAAMG,SAAN,CAAP;AACD","sourcesContent":["import { API } from \"@koh/api-client\";\nimport { AlertType, RephraseQuestionPayload } from \"@koh/common\";\nimport React, { ReactElement } from \"react\";\nimport useSWR from \"swr\";\nimport { useRouter } from \"next/router\";\nimport StudentQuestionRephraseModal from \"../Queue/Student/StudentQuestionRephraseModal\";\n\ntype AlertsContainerProps = {\n  courseId: number;\n};\nexport default function AlertsContainer({\n  courseId,\n}: AlertsContainerProps): ReactElement {\n  const router = useRouter();\n  const { data, mutate: mutateAlerts } = useSWR(\"/api/v1/alerts\", async () =>\n    API.alerts.get(courseId)\n  );\n  const alerts = data?.alerts;\n\n  const handleClose = async (alertId, courseId, queueId) => {\n    await API.alerts.close(alertId);\n    mutateAlerts();\n    router.push(`/course/${courseId}/queue/${queueId}?edit_question=true`);\n  };\n\n  const alertDivs = alerts?.map((alert) => {\n    switch (alert.alertType) {\n      case AlertType.REPHRASE_QUESTION:\n        return (\n          <StudentQuestionRephraseModal\n            payload={alert.payload as RephraseQuestionPayload}\n            handleClose={async (courseId, queueId) =>\n              await handleClose(alert.id, courseId, queueId)\n            }\n          />\n        );\n    }\n  });\n\n  // probably want some better way of handling multiple alerts\n  return <div>{alertDivs}</div>;\n}\n"]},"metadata":{},"sourceType":"module"}